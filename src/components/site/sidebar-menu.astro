---
import getFoldersArray from "../../mixins/get-folders";
const { title, url, files } = Astro.props;
// const allMd = await Astro.glob('../../pages/docs/**/*.md');
// const allMdx = await Astro.glob('../../pages/docs/**/*.mdx');
// const allFiles = allMd.concat(allMdx);
const folders = getFoldersArray(files);
const originalPath = new URL(Astro.request.url).pathname;
const pathname = originalPath.split('/').slice(1);
const parentFolder = pathname[1];
const childFile = pathname[2];
---

<ul class="sidebar-menu list">
    {folders.map((folder) => 
    <li class={`accordion no-border mb-0 ${parentFolder === folder ? "active" : ""}`}>
        <a href="#" class={`text--base text--capitalize accordion__header py-2 px-3 mb-0 ${parentFolder === folder ? "text--bold" : ""}`}>
            <i class="pi-angle-down accordion__icon mr-2 text--light"></i>
            {folder}
        </a>
        
        <ul class="list accordion__content py-2 background--lighter">
            {
                files
                    .filter((file) => file.url.includes(folder))
                    .map((file) => (
                    <li class="mb-0 flex">
                        <a href={file.url} class={`text--base pr-3 py-2 pl-4 w-100 text--light--hover ${originalPath === file.url ? "text--bold" : ""}`}>{file.frontmatter.title}</a>
                    </li>
                    ))
            }
        </ul>
    </li>
    )}
    <!-- For /layouts pages -->
    <!-- <li class="mb-0 flex">
        <a href={file.url} class={`text--base pr-3 py-2 pl-4 w-100 text--light--hover ${originalPath === file.url ? "text--bold" : ""}`}>{file.frontmatter.title}</a>
    </li> -->
</ul>
